"use strict";$(document).ready(function(){function t(t){setTimeout(function(){$(t).fadeOut()},800)}function n(t){$(".partnersList").empty(),$(".sortBtn").removeClass("sortBtnActive"),$(t).addClass("sortBtnActive")}function e(t,n){$(t).each(function(){$(this).each(function(){$(".partnersList").append('<li class="partnersItem">'+this.name+'<span class="partnersPercent">'+this.value+"%</span></li>")})})}$.getJSON("http://codeit.pro/codeitCandidates/serverFrontendTest/company/getList",function(s){if("OK"==s.status){var a=[],o={},i=[];$(".sumCompanies").text(s.list.length),t($(".preloaderTotal")),$(s.list).each(function(t,n){$(".listCompanies ul").append('<a href="#" class="list-group-item list-group-item-action">'+n.name+"</a>"),a.push(n)}),t($(".preloaderList")),$(".listCompanies ul a").on("click",function(){event.preventDefault(),$(".partnersList").empty(),$(".partnersBlock").slideDown("slow"),$(".exit").on("click",function(){$(".partnersBlock").slideUp("slow")});var t=[],s=$(this);$(".listCompanies ul a").hasClass("active")?($(".listCompanies ul a").removeClass("active"),$(this).addClass("active")):$(this).addClass("active"),$(a).each(function(){this.name===s.text()&&(t=t.concat(this.partners))}),$(".sortNameBtnUp").on("click",function(){n(this),t.sort(function(t,n){return t.name>n.name?-1:t.name<n.name?1:0}),e(t,this)}),$(".sortNameBtnUp").hasClass("sortBtnActive")&&(t.sort(function(t,n){return t.name>n.name?-1:t.name<n.name?1:0}),e(t,$(".sortNameBtnUp"))),$(".sortNameBtnDown").on("click",function(){n(this),t.sort(function(t,n){return t.name>n.name?1:t.name<n.name?-1:0}),e(t,this)}),$(".sortNameBtnDown").hasClass("sortBtnActive")&&(t.sort(function(t,n){return t.name>n.name?1:t.name<n.name?-1:0}),e(t,$(".sortNameBtnDown"))),$(".sortPercBtnUp").on("click",function(){n(this),t.sort(function(t,n){return t.value>n.value?1:t.value<n.value?-1:0}),e(t,this)}),$(".sortPercBtnUp").hasClass("sortBtnActive")&&(t.sort(function(t,n){return t.value>n.value?1:t.value<n.value?-1:0}),e(t,$(".sortPercBtnUp"))),$(".sortPercBtnDown").on("click",function(){n(this),t.sort(function(t,n){return t.value>n.value?-1:t.value<n.value?1:0}),e(t,this)}),$(".sortPercBtnDown").hasClass("sortBtnActive")&&(t.sort(function(t,n){return t.value>n.value?-1:t.value<n.value?1:0}),e(t,$(".sortPercBtnDown")))}),$(s.list).each(function(t,n){i.push(n.location.name)}),o=i.reduce(function(t,n){return t[n]=(t[n]||0)+1,t},{}),$(function(){var t=[];for(var n in o)t.push({label:n,data:o[n]});var e=$("#graph");e.unbind(),$.plot(e,t,{series:{pie:{show:!0}},legend:{show:!1}})}),t($(".preloaderLocation"))}else location.reload(!0)})});